// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r=function(e,t){return function(){return e.apply(t,arguments)}},i=[].slice;t=function(){function e(e,t,n,i){this.callback=i,this.next=r(this.next,this),this._next=r(this._next,this),this.spawn=r(this.spawn,this),n.next=this.next,n.spawn=this.spawn,n.raise=this.raise,this.threads=[],this._unjoinedThreadCount=1;try{t.unshift(n),e.apply(null,t)}catch(s){this.callback([s])}}return e.prototype.raise=function(e){throw e},e.prototype.spawn=function(){var e,t=this;return this._unjoinedThreadCount++,e=this.threads.length,this.threads.push([null]),function(){var n;return n=1<=arguments.length?i.call(arguments,0):[],n.unshift(null),t.threads[e]=n,t._unjoinedThreadCount--,t._next()}},e.prototype._next=function(){if(this._unjoinedThreadCount===0)return this.threads.length===1&&(this.threads=this.threads[0]),this.callback(this.threads)},e.prototype.next=function(){arguments.length>0&&this.spawn().apply(null,arguments),this._unjoinedThreadCount--,this._next()},e}(),e=function(){function e(e,t,n){this.steps=e,t==null&&(t=null),n==null&&(n=null),this.run=r(this.run,this),n==null&&(n=t,t=null),n==null&&(n=function(){}),t==null&&(t={}),this.steps.push(n),this.state=t}return e.prototype.run=function(){var e,n,r=this;e=-1,n=function(i){var s;e++;if(e<r.steps.length)return s=new t(r.steps[e],i,r.state,n)},n([null])},e}(),n=function(t,n,r){(new e(t,n,r)).run()},typeof module!="undefined"?module.exports=n:window.flow=n}).call(this);